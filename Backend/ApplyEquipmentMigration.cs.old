using System;
using Microsoft.Data.SqlClient;
using System.IO;

class ApplyEquipmentMigration
{
    static void Main()
    {
        string migrationFile = "Migrations/20251202_AddEquipmentPurchaseTracking.sql";
        string dbPath = "../Database/HDScheduler.db";
        
        if (!File.Exists(migrationFile))
        {
            Console.WriteLine($"Migration file not found: {migrationFile}");
            return;
        }
        
        string sql = File.ReadAllText(migrationFile);
        
        try
        {
            using (var connection = new SQLiteConnection($"Data Source={dbPath};Version=3;"))
            {
                connection.Open();
                using (var command = new SQLiteCommand(sql, connection))
                {
                    command.ExecuteNonQuery();
                }
            }
            
            Console.WriteLine("✓ Migration applied successfully!");
        }
        catch (Exception ex)
        {
            Console.WriteLine($"✗ Migration failed: {ex.Message}");
        }
    }
}
